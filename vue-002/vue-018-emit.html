<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>lesson 18</title>
    <script src="../vue/vue@3.2.23.js"></script>
  </head>
  <body>
    <div id="root"></div>
  </body>
  
  <script>
    // $emit 
    // 触发一个自定义事件，可以携带数据
    // 用于子组件向父组件传递信息
    // 基本语法：this.$emit(eventName, [...args])
    //          eventName：自定义事件的名称（字符串）。
    //          [...args]：可选，要传递给监听器的额外参数。
    // 
    // 父组件监听事件  @custom-event="handleChildEvent"
    // 子组件触发事件  custom-event
    // 子组件定义 emits:["custom-event"] 声明、 emits 事件
    const app = Vue.createApp({
      data() {
        return {
          messageFromChild: "",
        };
      },
      methods: {
        handleChildEvent(message) {
          this.messageFromChild = message;
        },
      },
      template: `
    <div>
    <h2>父组件</h2>
    <p>来自子组件的消息: {{ messageFromChild }}</p>
    <child-component @customEvent="handleChildEvent"></child-component>
    </div>
    `,
    });

    app.component("ChildComponent", {
      // emits:["custom-event"],

      // return false 参数校验不通过，console 会有警告
      // return true 参数校验通过
      // emits:{
      //   customEvent:(value) => {
      //      if(value) {
      //       return false
      //      }else{
      //       return true
      //      }
      //   }
      // },

      methods: {
        sendMessageToParent() {
          this.$emit("customEvent", "这是来自子组件的消息");
        },
      },
      template: `
    <div>
    <h3>子组件</h3>
    <button @click="sendMessageToParent">发送消息给父组件</button>
    </div>
    `,
    });

    const vm = app.mount("#root");
  </script>
</html>
